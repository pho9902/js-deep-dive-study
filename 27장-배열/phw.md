# 27장 배열

> 자바스크립트에 배열이라는 타입은 존재하지 않는다. 배열은 객체 타입이다. typeof [1,2,3] -> object

## 자바스크립트 배열은 배열이 아니다.

- 자료구조에서 말하는 배열은 동일한 크기의 메모리 공간이 빈틈없이 연속적으로 나열된 자료구조를 말한다
  - 배열의 요소는 하나의 데이터 타입으로 통일되어 있으며 서로 연속적으로 인접해 있다. 이러한 배열을 밀집배열이라한다.
- 배열의 요소를 위한 각각의 메모리 공간은 동일한 크기를 갖지 않아도 되며, 연속적으로 이어져 있지 않을수도 있다.

  - 배열의 요소가 연속적으로 이어져 있지 않는 배열을 `희소배열`이라 한다.

- 일반적인 배열과 자바스크립트 배열의 차이점

1. 일반적인 배열은 인덱스로 요소에 빠르게 접근할 수 있다. 하지만 특정 요소를 검색하거나 요소를 삽입 또는 삭제하는 경우에는 효율적이지 않다.

1. 자바스크립트 배열은 `해시 테이블`로 구현된 객체이므로 인덱스로 요소에 접근하는 경우 일반적인 배열보다 성능적인 면에서 느릴 수밖에 없는 구조적인 단점이 있다. 하지만 특정 요소를 검색하거나 요소를 삽입 또는 삭제하는 경우에는 일반적인 배열보다 빠른 성능을 기대할 수 있다.

## length 프로퍼티

- length 프로퍼티 값보다 큰 숫자 값을 할당하는 경우 length 프로퍼티 값은 변경되지만 실제로 배열의 길이가 늘어나지는 않는다.

```JS
const arr = [1];
// 현재 length 프로퍼티 값인 1보다 큰 숫자 값 3을 length 프로퍼티에 할당
arr.length = 3;
// length 프로퍼티 값은 변경되지만 실제로 배열의 길이가 늘어나지는 않는다.
console.log(arr.length); // 3
console.log(arr); // [1, empty * 2]
```

- length 프로퍼티 값보다 큰 숫자 값을 할당하는 경우 length 프로퍼티 값은 변경되지만 실제 배열에는 변함이 없다.
- 비어있는 요소를 위해 메모리 공간을 확보하지 않으며 빈 요소를 생성하지도 않는다.

  - 요소가 연속적이지 않고 일부분이 비어있는 희소배열을 허용
  - 희소 배열의 length는 희소 배열의 실제 요소 개수보다 언제나 크다.

> 희소배열 생성은 안티패턴, 배열에는 같은 타입의 요소를 연속적으로 위치시키는 것이 최선이다.

## 배열 생성

1. 배열 리터럴
1. Array 생성자 함수
   1. 전달된 인수가 1개인 경우 인수만큼의 길이를 갖는 배열 생성
   1. 전달된 인수가 2개 이상이면 인수를 요소로 갖는 배열을 생성
   1. 전달된 인수가 없는 경우 빈 배열 생성
1. Array.of
   1. 전달된 인수를 요소로 갖는 배열을 생성한다 (1개여도 요소로 생성)
1. Array.from

   1. 메서드는 유사 배열 객체 또는 이터러블 객체를 인수로 전달받아 배열로 변환하여 반환

   ```JS
   Array.from({ length: 2, 0: 'a', 1: 'b' }); // ['a', 'b']

   Array.from( 'Hello' ); //['H‘, 'e', 'l', 'l', ’o']

   Array.from({ length: 3 }); // [undefined, undefined, undefined]

   Array.from({ length: 3 }, (_, i) => i); // [0, 1, 2]
   ```

## 배열 메서드

> 원본배열을 직접 변경하는 메서드는외 부상태를 직접 변경하는 부수효과가 있으므로 사용할때주의해야한다.

- 가급적 부수효과기 없는 메서드를 사용하는 것이 좋다.
<details>

1. Array.isArray (Array 생성자 함수의 정적 메서드)

   - 전달된 인수가 배열이면 true 아니면 false 반환

1. Array.prototype.indexOf

1. Array.prototype.push (부수효과 O)

   - 마지막 요소로 추가할 요소가 하나뿐이라면 push 메서드를 사용하지 않고 length 프로퍼티를 사용하여 배열의 마지막에 요소 추가 하는것이 더 빠르다

1. Array.prototype.pop (부수효과 O)

   - 원본 배열이 빈 배열이면 undefined를 반환한다.

1. Array.prototype.unshift (부수효과 O)

   - 인수로 전달받은 모든 값을 원본 배열의 선두에 요소로 추가하고 변경된 length 프로퍼티 값을 반환한다.

1. Array.prototype.shift (부수효과 O)

   - 원본 배열에서 첫 번째 요소를 제거하고 제거한 요소를 반환한다

1. Array.prototype.concat

   - 인수로 전달된 값들(배열 또는 원시값)을 원본 배열의 마지막 요소로 추가한 새로운 배열을 반환한다.
   - 인수로 전달한 값이 배열인 경우 배열을 해체하여 새로운 배열의 요소로 추가한다

1. Array.prototype.splice (부수효과 O)

   - 원본 배열의 중간에 요소를 추가하거나 제거
   - arr.splice(시작인덱스, 제거할 개수, 추가할 요소들)
     - 세번째 인수 없으면 제거하기만 한다.

1. Array.prototype.slice

   - 인수로 전달된 범위(첫번째 인수 부터 마지막 인수 - 1 까지)의 요소들을 복사하여 배열로 반환한다.
   - 첫번째 파라미터가 음수인경우 배열의 끝에서의 인덱스를 나타낸다 ex) slice(-2) 배열의 마지막 두개의 요소를 복사하여 배열로 반환
   - 두번째 파라미터 생략시 기본값은 배열 length

1. Array.prototype.join
1. Array.prototype.reverse (부수효과 O)
1. Array.prototype.fill (부수효과 O)
1. Array.prototype.includes

   - 두번째 파라미터 : 검색을 시작할 인덱스(음수일 경우 length 값과 합친 인덱스부터 검색)

1. Array.prototype.flat
   - 인수로 전달된 수만큼 재귀젹으로 배열 평탄화
   - 인수 기본값 1 , 인수가 Infinity 일 경우 모든 중첩배열 평탄화
   </details>

## 배열 고차 함수

1. Array.prototype.sort

   - 숫자 요소를 정렬할 때는 정렬 순서를 정의하는 비교 함수를 인수로 전달해야 한다.
   - 비교 함수는 양수나 음수 또는 0을 반환해야 한다.
   - 비교 함수의 반환값이 0보다 작으면 비교 함수의 첫 번째 인수를 우선하여 정렬

1. Array.prototype.forEach

   - 배열 순회 메서드에서 희소 배열의 경우 존재하지 않는 요소는 순회 대상에서 제외됨
   - 성능은 for 문보다 떨어짐
   - 반환값은 언제나 undefined

1. Array.prototype.map

   - 희소배열에서의 map

   ```js
   const arr = [1, 2];
   arr.length = 4;

   console.log(arr.map((el) => el)); // [ 1, 2, <2 empty items> ]
   ```

1. Array.prototype.filter
   - 콜백 함수의 반환값이 true인 요소로만 구성된 새로운 배열을 반환한다 (부수효과 없음)
1. Array.prototype.reduce

   - 콜백함수의 반환값을 다음 순회시에 콜백함수의 첫번째 인수로 전달해 나가며 하나의 결과값을 만든다 (부수효과 없음)
   - 첫번째 인수로 콜백함수, 두번째 인수로 초기값
   - 콜백함수의 인수 (초기값(이전 콜백의 반환값), 요소값, 인덱스, this)
   - reduce 메서드를 호출할 때는 언제나 초기값을 전달하는 것이 안전하다.

1. Array.prototype.some
   - 순회중 콜백이 단 한번이라도 참이면 true 반환 (빈배열은 false)
1. Array.prototype.every
   - 순회중 모든 콜백이 참일 경우 true 반환 (빈배열일땐 true)
1. Array.prototype.find
   - 콜백 반환값이 true인 첫번째 요소 반환 (기본값 undefined)
1. Array.prototype.tindIndex
   - 콜백 반환값이 true인 첫번째 요소의 인덱스 반환 (기본값 -1)
1. Array.prototype.flatMap
