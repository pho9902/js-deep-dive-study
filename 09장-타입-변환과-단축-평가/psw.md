# 09장 타입-변환과-단축-평가

## 본문 요약

# 9.1 타입 변환이란?

자바스크립트의 모든 값은 타입을 갖는다. 타입 변환이란 이러한 타입이 변화되는 것을 타입 변환이라 한다. 개발자가 의도를 가지고 값의 타입을 변환하는 것을 명시적 타입 변환 또는 타입 캐스팅이라 한다. 반대로 개발자가 타입 변환을 위한 코드를 따로 작성하지 않고도 타입을 변환 시키는 것은 암묵적 타입 변환이라 한다.

# 9.2 암묵적 타입 변환

암묵적 타입 변환은 표현식을 평가 할 때 문맥에 맞게 자바스크립트 엔진이 암묵적으로 피연산자의 타입을 변화시키는 것을 말한다.

```jsx
"10" + 1;
// 두 연산자가 모두 문자열 타입이어야 하는 문맥
// 이 때 1이 암묵적 타입 변환되어 '1'로 퍙가된다.

50 * "6";
// 두 연산자가 모두 숫자 타입이어야 하는 문맥
// 암묵적 형변환이 '6'을 숫자타입으로 변환된다.
```

암묵적 타입 변환은 원시 타입으로만 발생한다.

### 9.2.1 문자열 타입으로 변환

표현식의 피연산자만이 암묵적 타입 변환의 대상이 되는 것은 아니다.

```jsx
`1 + 1 = ${1 + 1}`; // => '1 + 1 + 2'
```

이렇듯 탬플릿 리터럴의 표현식 삽입의 결괏값 또한 문맥에 맞게 문자열로 변환된다.

### 9.2.2 숫자 타입으로 변환

문자열 연결 연산자로 활용되는 + 를 제외한 산술 연산자들의 피연산자는 반드시 숫자 타입이어야 한다. 만약 숫자 타입이 아닌 값에 산술 연산자를 사용하려 하면 결괏값이 NaN으로 나온다. 또한 숫자의 대소를 비교하는 비교 연산자를 사용 할 때에도 두 연산자가 모두 숫자 타입이어야 한다.

```jsx
1 > "0"; // 이 표현식은 true로 퍙가된다. '0'이 숫자 0으로 평가되기 때문이다.
```

### 9.2.3 불리언 타입으로 변환

불리언 타입으로 암묵적 타입 변환이 일어나는 가장 흔한 상황은 조건문의 조건식에서 이다.

조건식은 반드시 참, 거짓으로 평가되어야 하는데 다른 타입으로 평가되는 식이라면 타입 변환을 통해 불리언 값으로 만들어 평가한다.

다음 값들은 암묵적 타입 변환이 일어날 때 false로 평가되는 값들이다.

- undefined
- null
- 0, -0
- NaN
- ‘ ’ (빈 문자열)

# 9.3 명시적 타입 변환

명시적 타입 변환은 개발자가 의도저으로 값의 타입을 변환하는 것을 말한다.

### 9.3.1 문자열 타입으로 변환

문자열 타입이 아닌 값을 문자열 타입으로 바꾸는 방법은 다음과 같다.

1. String 생성자 함수를 new연산자 없이 호출하는 방법
2. Object.prototype.toString 메서드를 사용하는 방법
3. 문자열 연결 연산자( + ) 를 사용하는 방법

```jsx
String(true); // "true" 불리언 타입 값인 true가 문자열 "true" 로 형변환 되었다.
(1).toString(); // "1" 숫자 타입 값인 1이 문자열 타입 "1" 로 형변환 되었다.
NaN + ""; // "NaN" 숫자 타입 값인 NaN이 문자열 타입 "NaN" 으로 형변환 되었다.
```

### 9.3.2 숫자 타입으로 변환

숫자 타입으로 형 변환 하는 법은 다음과 같다.

1. Number 생성자 함수를 new연산자 없이 호출하는 방법
2. parseInt. parseFloat 함수를 사용하는 방법(문자열 타입에만 사용 가능)
3. +(단항 산술 연산자)를 사용하는 방법
4. \*(산술 연산자를 이용하는 방법)

```jsx
Number("0"); // 문자열 타입인 '0'이 숫자 타입 0으로 형변환 된다.
parseInt("10.22"); // 문자열 타입인 "10.22"가 숫자 타입인 10.22로 형변환 된다.
+true; // 불리언 타입인 true가 숫자 타입인 1로 형변환 된다.
false * 1; // 불리언 타입인 false를 숫자 타입인 0으로 형변환 된다.
```

### 9.3.3 불리언 타입으로 변환

불리언 타입으로의 타입 변환 방법은 다음과 같다.

1. Bolean 생성자 함수를 new 연산자 없이 호출하는 방법
2. !(논리 부정 연산자)를 두 번 사용하는 방법

```jsx
Bolean(""); // 빈 문자열이 불린값인 false로 변환된다.
!!1; // 숫자타입인 1이 불린값인 true로 변환된다.
```

# 9.4 단축 평가

### 9.4.1 논리 연산자를 사용한 단축 평가

&&(논리곱 연산자) , ||(논리합 연산자)는 불리언 값을 반환하는 연산자 이지만 다른 사용 방법이 있다.

논리 연산자의 피연산자들이 불리언 타입이 아닐 경우 다른 평가를 진행한다.

논리곱 연산자는 좌항이 true로 평가되는 값이라면 평가 결과를 결정하는 우항을 그대로 반환한다.

```jsx
"cat" && "dog"; // "cat" 이 true로 평가되는 값이기에 "dog"를 반환한다.
```

논리합 연산자는 두항중 하나만 true여도 true를 반환한다. 그래서 논리곱과는 반대로 좌항이 true라면 우항과 관계없이 좌항을 반환한다.

```jsx
"cat" || "dog"; // "cat" 이 true로 평가되는 값이기에 "dog"를 반환한다.
```

이처럼 논리 연산의 결과를 결정하는 피연산자를 타입 변환하지 않고 그대로 반환한다. 이를 단축 평가라고 한다. 단축 평가는 표현식을 평가하는 도중에 평가 결과가 확정된 경우 나머지 평가 과정을 생략하는 것을 말한다.

### 9.4.2 옵셔널 체이닝 연산자

?.(옵셔널 체이닝 연산자)는 좌항의 피연산자가 null 이나 undefined이라면 undefined를 반환하고 아니면 우항을 반환한다.

### 9.4.3 null 병합 연산자

??(null 병합 연산자는) 좌항이 undefined이거나 null이라면 우항의 피연산자를 반환하고 아니면 좌항을 반환한다
