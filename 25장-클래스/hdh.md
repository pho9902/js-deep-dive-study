# 25장 클래스

# 클래스

### 1. 클래스는 프로토타입의 문법적 설탕인가?

- 문법적 설탕(syntactic sugar): 사람이 이해하거나 작성하기 쉽게 설계된 문법
- 프로토타입 기반 객체지향 언어인 자바스크립트는 클래스가 필요 없다.
- 자바스크립트의 클래스는 자바같은 클래스 기반 객체지향 언어와 흡사하다.
- 클래스와 생성자 함수는 모두 프로토타입 기반의 인스턴스를 생성하지만 동일하지는 않다.
  1. 클래스는 new 연산자 없이 호출하면 에러 발생(생성자 함수는 new 연산자 없이 호출 시 일반 함수로 동작)
  2. 클래스는 상속을 지원하는 extends와 super 키워드를 제공한다.
  3. 클래스는 호이스팅이 발생하지 않는 것처럼 동작한다.
  4. 클래스 내의 모든 코드는 암묵적으로 strict mode가 지정되어 실행되고 strict mode를 해제할 수 없다.
- 클래스는 프로토타입의 문법적 설탕이라고 보기보다는 새로운 객체 생성 메커니즘으로 보는 것이 좋다.

### 2. 클래스 정의

- class 키워드를 사용하여 정의한다.
- 클래스는 생성자 함수처럼 파스칼 케이스를 사용하는 것이 일반적이다.
- 클래스는 표현식으로 정의할 수 있다. 즉, 값으로 사용할 수 있고 일급 객체이다.
- 클래스의 몸체에서 정의할 수 있는 메서드는 constructor(생성자), 프로토타입 메서드, 정적 메서드 세 가지다.

```js
// 클래스 선언문
class Person {
  // 생성자
  constructor(name) {
    this.name = name;
  }

  // 프로토타입 메서드
  sayHi() {
    console.log(`Hi! My name is ${this.name}`);
  }

  // 정적 메서드
  static sayHello() {
    console.log("Hello!");
  }
}

// 인스턴스 생성
const me = new Person("Hong");

// 인스턴스의 프로퍼티 참조
console.log(me.name);
// 프로토타입 메서드 호출
me.sayHi();
// 정적 메서드 호출
Person.sayHello();
```

### 3. 클래스 호이스팅

- 클래스는 함수로 평가된다.
- 클래스 선언문으로 정의한 클래스는 함수 선언문과 같이 런타임 이전에 평가되어 constructor 함수 객체를 생성한다.
- 클래스 정의 이전에 참조할 수 없다.
- 클래스도 호이스팅이 발생하지만 let, const 키워드로 선언한 변수처럼 클래스 선언문 전에 TDZ가 생긴다.

### 4. 인스턴스 생성

- 클래스는 인스턴스 생성이 목적이기 때문에 반드시 new 연산자와 함께 호출해야 한다.
- 클래스 표현식으로 정의된 경우 식별자가 아닌 클래스 이름으로 인스턴스를 생성하면 에러가 발생한다.
- 함수와 마찬가지로 클래스 이름은 클래스 몸체 내부에서만 사용 가능하기 때문

### 5. 메서드

#### 5.1 constructor

- 인스턴스를 생성하고 초기화하기 위한 특수한 메서드
- 클래스 내에 최대 한 개만 존재할 수 있다.
- 생략할 수 있다.(인스턴스를 초기화 하려면 생략하지 말자)
- 초기화 하려면 constructor 내부에서 this에 프로퍼티를 추가한다.
- return 문을 사용하여 객체를 반환하면 this(인스턴스)가 아닌 명시한 객체가 반환된다.
- return 문을 사용하여 원시값을 반환하면 원시값 반환은 무시되고 this가 반환된다.
- return 문을 쓰지 말자.

#### 5.2 프로토타입 메서드

- 생성자 함수 인스턴스의 프로토타입 메서드와 다르게 따로 prototype 프로퍼티에 메서드를 추가하지 않아도 기본적으로 프로토타입 메서드가 된다.

#### 5.3 정적 메서드

- 생성자 함수의 정적 메서드는 생성자 함수에 메서드를 추가해야 하지만 클래스는 메서드에 static 키워드를 붙이면 정적 메서드가 된다.

### 6. 클래스의 인스턴스 생성 과정

1. 인스턴스 생성과 this 바인딩
   - new 연산자와 클래스를 호출하면 빈 객체가 생성된다.
   - this에 인스턴스(생성된 빈 객체)가 바인딩
2. 인스턴스 초기화
   - constructor의 내부 코드가 실행되어 this에 바인딩된 인스턴스를 초기화한다.
3. 인스턴스 반환
   - 인스턴스가 바인딩된 this가 암묵적으로 반환된다.

### 7. 프로퍼티

#### 7.1 인스턴스 프로퍼티

- 인스턴스 프로퍼티는 constructor 내부에서 정의해야 한다.
- 생성자 함수 프로퍼티 정의와 마찬가지로 this에 프로퍼티를 추가한다.

#### 7.2 접근자 프로퍼티

- get과 set 키워드를 사용해 정의한다.
- getter는 인스턴스 프로퍼티에 접근할 때 setter는 인스턴스 프로퍼티에 값을 할당할 때 사용한다.
- getter는 반드시 무언가를 반환해야 하고 setter는 반드시 매개변수가 필요하다.
