# 23장 실행-컨텍스트

## 소스코드의 타입

- 전역 코드 -> 전역 실행 컨텍스트 생성
- 함수 코드 -> 함수 실행 컨텍스트 생성
- eval 코드 -> eval 실행 컨텍스트 생성
- 모듈 코드 -> 모듈 실행 컨텍스트 생성

## 소스코드의 평가 실행

&nbsp;자바스크립트 엔진은 코드를 2개의 과정 `평가`와 `실행`으로 나누어 처리한다. 먼저 평가 과정에서 변수, 함수등의 선언문만 먼저 실행하여 실행 컨텍스트가 관리하는 스코프에 등록한다.
&nbsp;평가가 끝나면 한 줄씩 순차적으로 실행하게 된다.

## 실행 컨택스트의 역할

다름 코드에 실행 순서를 알아보겠다.

```js
const x = 1;
const y = 2;

function foo(a) {
  const x = 10;
  const y = 20;

  console.log(a + x + y);
}

foo(100);

console.log(x + y);
```

전역 코드 평가 시작  
-> 변수와 함수 선언문 먼저 전역 스코프에 등록  
-> x와 y 할당 실행  
-> foo 함수 호출 되면 실행을 일시중지하고 함수 내부 진입  
-> 함수 코드 평가 시작  
-> 매개변수와 변수들을 함수 스코프에 등록  
-> console 식별자를 함수 스코프내에서 검색  
-> 없을 시 상위 스코프인 전역 스코프에서 검색  
-> 식별자를 발견후 이제 프로토타입 체인에서 log 메서드 검색  
-> 그 후 a, x, y를 함수 스코프에서 검색 후 연산 후 출력  
-> 더 이상 함수 코드가 없으니 함수 실행을 종료하고 전역으로 돌아옴  
-> 전역 스코프에서 console을 찾고 log 메서드를 찾고 실행  
-> x, y를 전역 스코프에서 찾아서 연산 후 출력  
-> 종료

## 실행 컨텍스트 스텍

&nbsp; 실행 컨텍스트는 스택 자료구조로 관리된다. 이를 실행 컨텍스트 스텍이라고 한다. 소스 코드가 평가되면 실행 컨텍스트가 생성되고 스택 최상위에 쌓인다. 즉 실행 컨텍스트 스택의 최상위에 존재하는 실행 컨텍스트는 언제나 현재 실행 중인 코드의 실행 컨텍스트이다.

## 렉시컬 환경

- 렉시컬 환경: 식별자와 식별자에 바인딩된 값, 그리고 상위 스코프에 대한 함조를 기록하는 자료구로로 실행 컨텍스트를 구성하는 컴포턴드

&nbsp;렉시컬 환경은 스코프와 식별자를 관리한다. 즉, 렉시컬 환경은 스코프를 구분하여 식별자를 등록하고 관리하는 저장소 역할을 한다.

&nbsp;이는 두개의 컴포넌트로 구성된다.

1. 환경 레코드
2. 외부 렉시컬 환경에 대한 참조
